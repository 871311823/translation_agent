# Translation Agent éƒ¨ç½²å®Œæˆ

## âœ… éƒ¨ç½²çŠ¶æ€

é¡¹ç›®å·²æˆåŠŸéƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼š**47.109.82.94**

### éƒ¨ç½²ä½ç½®
- é¡¹ç›®ç›®å½•ï¼š`/opt/translation-agent`
- Python ç‰ˆæœ¬ï¼š3.9.5
- Poetry ç‰ˆæœ¬ï¼š1.8.5
- è™šæ‹Ÿç¯å¢ƒï¼šå·²åˆ›å»ºå¹¶å®‰è£…æ‰€æœ‰ä¾èµ–

### å·²å®Œæˆçš„æ­¥éª¤
1. âœ… å…‹éš†é¡¹ç›®ä»£ç 
2. âœ… å®‰è£… Python 3.9
3. âœ… å®‰è£… Poetry
4. âœ… å®‰è£…é¡¹ç›®ä¾èµ–ï¼ˆåŒ…æ‹¬ WebUIï¼‰
5. âœ… åˆ›å»º .env æ–‡ä»¶æ¨¡æ¿
6. âœ… åˆ›å»º systemd æœåŠ¡æ–‡ä»¶

## ğŸ”§ ä¸‹ä¸€æ­¥æ“ä½œ

### 1. é…ç½® API Keyï¼ˆå¿…éœ€ï¼‰

ç¼–è¾‘æœåŠ¡å™¨ä¸Šçš„ .env æ–‡ä»¶ï¼Œæ·»åŠ ä½ çš„ OpenAI API Keyï¼š

```bash
ssh root@47.109.82.94
nano /opt/translation-agent/.env
```

å°† `your-openai-api-key-here` æ›¿æ¢ä¸ºä½ çš„å®é™… API Keyã€‚

### 2. å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨æœåŠ¡
systemctl start translation-agent

# è®¾ç½®å¼€æœºè‡ªå¯
systemctl enable translation-agent

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status translation-agent
```

### 3. æŸ¥çœ‹æ—¥å¿—

```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
journalctl -u translation-agent -f

# æŸ¥çœ‹æœ€è¿‘æ—¥å¿—
journalctl -u translation-agent -n 50
```

### 4. é…ç½®é˜²ç«å¢™ï¼ˆå¦‚æœéœ€è¦ï¼‰

å¦‚æœæ— æ³•è®¿é—® WebUIï¼Œå¯èƒ½éœ€è¦å¼€æ”¾ 7860 ç«¯å£ï¼š

```bash
# Ubuntu/Debian (ufw)
ufw allow 7860/tcp

# æˆ–è€…ä½¿ç”¨ iptables
iptables -A INPUT -p tcp --dport 7860 -j ACCEPT
```

### 5. è®¿é—® WebUI

éƒ¨ç½²å®Œæˆåï¼ŒWebUI å°†åœ¨ä»¥ä¸‹åœ°å€è¿è¡Œï¼š
- **æœ¬åœ°è®¿é—®**ï¼š`http://127.0.0.1:7860`
- **è¿œç¨‹è®¿é—®**ï¼š`http://47.109.82.94:7860`

## ğŸ“ å¸¸ç”¨å‘½ä»¤

```bash
# å¯åŠ¨æœåŠ¡
systemctl start translation-agent

# åœæ­¢æœåŠ¡
systemctl stop translation-agent

# é‡å¯æœåŠ¡
systemctl restart translation-agent

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status translation-agent

# æŸ¥çœ‹æ—¥å¿—
journalctl -u translation-agent -f

# ç¦ç”¨å¼€æœºè‡ªå¯
systemctl disable translation-agent

# å¯ç”¨å¼€æœºè‡ªå¯
systemctl enable translation-agent
```

## ğŸ” æ•…éšœæ’æŸ¥

### æœåŠ¡æ— æ³•å¯åŠ¨

1. æ£€æŸ¥æ—¥å¿—ï¼š
   ```bash
   journalctl -u translation-agent -n 100
   ```

2. æ£€æŸ¥ .env æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”åŒ…å« API Keyï¼š
   ```bash
   cat /opt/translation-agent/.env
   ```

3. æ‰‹åŠ¨æµ‹è¯•è¿è¡Œï¼š
   ```bash
   cd /opt/translation-agent
   export PATH="$HOME/.local/bin:$PATH"
   poetry run python app/app.py
   ```

### æ— æ³•è®¿é—® WebUI

1. æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œï¼š
   ```bash
   systemctl status translation-agent
   ```

2. æ£€æŸ¥ç«¯å£æ˜¯å¦ç›‘å¬ï¼š
   ```bash
   netstat -tlnp | grep 7860
   # æˆ–
   ss -tlnp | grep 7860
   ```

3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

4. æ£€æŸ¥æœåŠ¡å™¨å®‰å…¨ç»„è§„åˆ™ï¼ˆå¦‚æœæ˜¯äº‘æœåŠ¡å™¨ï¼‰

## ğŸ“¦ é¡¹ç›®ä¿¡æ¯

- **é¡¹ç›®è·¯å¾„**ï¼š`/opt/translation-agent`
- **Poetry è™šæ‹Ÿç¯å¢ƒ**ï¼š`/root/.cache/pypoetry/virtualenvs/translation-agent-PETvBPVK-py3.9`
- **æœåŠ¡æ–‡ä»¶**ï¼š`/etc/systemd/system/translation-agent.service`
- **ç¯å¢ƒå˜é‡æ–‡ä»¶**ï¼š`/opt/translation-agent/.env`

## ğŸ¯ åŠŸèƒ½è¯´æ˜

Translation Agent æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

1. **WebUI ç•Œé¢**ï¼šåŸºäº Gradio çš„å›¾å½¢ç•Œé¢
2. **å¤š LLM æ”¯æŒ**ï¼šOpenAIã€Groqã€TogetherAIã€Ollama ç­‰
3. **æ–‡ä»¶ä¸Šä¼ **ï¼šæ”¯æŒ PDFã€DOCXã€TXT ç­‰æ ¼å¼
4. **ä¸‰é˜¶æ®µç¿»è¯‘**ï¼šåˆå§‹ç¿»è¯‘ â†’ åæ€ â†’ æ”¹è¿›ç¿»è¯‘
5. **å·®å¼‚å¯¹æ¯”**ï¼šæ˜¾ç¤ºç¿»è¯‘å‰åçš„å·®å¼‚

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **API Key å®‰å…¨**ï¼šç¡®ä¿ .env æ–‡ä»¶æƒé™æ­£ç¡®ï¼ˆå»ºè®® 600ï¼‰
   ```bash
   chmod 600 /opt/translation-agent/.env
   ```

2. **èµ„æºä½¿ç”¨**ï¼šç¿»è¯‘æœåŠ¡ä¼šæ¶ˆè€— API è°ƒç”¨ï¼Œæ³¨æ„æˆæœ¬æ§åˆ¶

3. **æ›´æ–°ä»£ç **ï¼š
   ```bash
   cd /opt/translation-agent
   git pull
   export PATH="$HOME/.local/bin:$PATH"
   poetry install --with app
   systemctl restart translation-agent
   ```


